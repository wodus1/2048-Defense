# 2048 Defense
**2048 퍼즐과 디펜스를 결합한 하이브리드 캐주얼 게임입니다**  
2048 타일을 합쳐 경험치를 모으고, 레벨업 시 랜덤 강화 효과를 선택하여 몰려오는 몬스터 웨이브를 막아냅니다

<img width="370" height="655" alt="image" src="https://github.com/user-attachments/assets/76d576e4-51c7-45e0-8715-4a3f2bad2283" />
<img width="370" height="657" alt="image" src="https://github.com/user-attachments/assets/ab10aec1-30d3-4a9f-8864-806f485df583" />

## ▶ 목차
- [주요 기능](#-주요-기능)
- [게임 플레이](#-게임-플레이)
- [시스템 아키텍처](#-시스템-아키텍처)
- [주요 시스템 개요](#-주요-시스템-개요)

## ▶ 주요 기능
- **2048 퍼즐 + 디펜스 결합**  
  2048 보드에서 타일을 합쳐 높은 숫자를 만들수록 더 많은 경험치를 획득합니다

- **웨이브 후 ‘보드 유지’ 시스템**  
  웨이브 종료 시 **가장 큰 타일만 남기고 보드를 초기화**하여 이어서 2048을 진행할 수 있습니다

- **자동 공격 시스템**  
  플레이어는 퍼즐에 집중하고, 투사체는 자동으로 가장 가까운 몬스터를 공격합니다

- **Roguelike 강화 선택**  
  레벨업 시 *2개의 랜덤 강화 중 1개*를 선택해 강화합니다

- **웨이브 기반 몬스터 시스템**  
  웨이브가 진행될수록 몬스터 체력·스폰 속도가 증가하며 난이도가 상승합니다

- **UI/연출(DOTween)**  
  타일 팝 애니메이션, 체력바 흔들림, 강화 선택, 브레이크 타임 등 다양한 UI 연출

## ▶ 게임 플레이

### ▸ 조작 방법
- **2048 타일 이동**
  - 마우스 드래그(또는 터치)를 상/하/좌/우로 스와이프하여 해당 방향으로 타일을 이동·합체할 수 있습니다
- **스탯 확인**
  - 게임 내 **스탯 버튼**을 눌러 현재 공격력, 공격 속도, 투사체 속도를 확인할 수 있습니다
- **게임 오버 조건**
  - 몬스터가 체력바(HpBar)에 닿으면 주기적으로 데미지를 입습니다
  - 체력이 0이 되면 GameOver UI가 표시되어 재시작 또는 로비로 이동할 수 있습니다


### ▸ 진행 흐름
**2048 퍼즐 플레이**  
- 타일을 합치면 숫자에 비례한 경험치 획득

**레벨업 발생**  
- 경험치가 일정량을 넘으면 레벨업

**강화 선택(Upgrade)**  
- 랜덤 2개의 효과 중 1개 선택  
- 공격력/공격속도/투사체 속도 등 스탯 강화

**자동 전투 진행**  
- 강화된 스탯으로 투사체가 자동 공격  
- 몬스터는 아래로 이동하며 기지 HP를 공격

**웨이브 종료 → 휴식 → 다음 웨이브 시작**
- 웨이브 종료 시 **가장 큰 타일만 남기고 보드를 초기화**하여 2048을 이어서 진행할 수 있습니다

## ▶ 시스템 아키텍처
이 프로젝트는 **2048 퍼즐(보드 시스템)**, **디펜스 시스템(몬스터·투사체·HP)** 을 서로 독립적인 기능 단위로 분리해 구성했습니다  
각 기능은 `SubSystems` 단위로 모듈화하여 유지보수성과 확장성을 확보했으며, 공통 관리 및 접근은 `SubSystemsManager`가 담당하도록 설계했습니다

- `GameManager`는 **2048 퍼즐 로직과 전체 게임 흐름을 조정하는 중심 관리자** 역할을 합니다
- 전투·레벨·강화 등 개별 기능들은 `ISubSystem` 인터페이스를 구현하고 `SubSystemsManager`를 통해 초기화 및 참조됩니다
- 강화 데이터는 ScriptableObject 기반 Effect로 추상화하여 코드 수정 없이 데이터 중심으로 확장 가능하도록 설계했습니다
  
## ▶ 주요 시스템 개요

### GameManager (2048 퍼즐 + 게임 흐름 제어)
- 4×4 2048 보드의 **타일 이동·합체·스폰 로직**을 관리합니다
- `Unity Input System`을 사용해 드래그 방향을 계산하고 해당 방향으로 타일을 밀어 붙이는 퍼즐 처리 흐름을 구현했습니다
- 게임 오버/일시정지/재시작 등의 상위 상태를 관리합니다
- 초기화 시 `SubSystemsManager`를 통해 전투/HP/레벨/강화 시스템을 가져와 전체 게임 흐름을 조율합니다

### SubSystemsManager (시스템 관리)

- 씬에 존재하는 모든 `ISubSystem` 구현체를 탐색해 초기화합니다
- 각 시스템은 `GetSubSystem<T>()`를 통해 참조되며 **시스템 간 직접 의존성을 줄이고 느슨한 결합**을 유지하도록 설계했습니다

### LevelSystem (레벨·경험치 관리)
- 2048 타일 숫자를 경험치로 변환하여 누적하고 특정 기준을 넘으면 레벨업 이벤트를 발생시킵니다
- 레벨에 따라 몬스터 체력·스폰 속도 배율을 계산하여 난이도를 조정합니다

### UpgradeSystem (강화 선택)
- `LevelSystem`의 레벨업 이벤트를 구독하여 `ScriptableObject` 기반 **Effect** 중 랜덤 2개를 선택해 UI로 노출합니다
- 선택된 이펙트는 `PlayerStatsSystem`에 반영되어 코드 변경 없이도 데이터(강화 종류)를 유연하게 확장할 수 있도록 설계했습니다

### PlayerStatsSystem (전투 스탯 집계)
- 공격력, 공격속도, 투사체 속도 등 스탯을 관리하고 강화 효과를 통해 변경된 최종 스탯을 계산합니다
- 스탯 관련 로직을 한 곳에 모아두어 관리하도록 했습니다

### ProjectileSystem (자동 사격 로직)
- `PlayerStatsSystem`의 최종 스탯을 기준으로 사격을 계산합니다
- 현재 필드의 몬스터 중 가장 가까운 타겟을 찾고 `PoolingSystem`에서 투사체를 가져와 발사합니다

### MonsterSystem (웨이브/난이도 관리)
- 웨이브 단위로 몬스터를 스폰하고, 리스트로 관리합니다
- `LevelSystem`에서 제공하는 정보를 사용해 레벨이 오를수록 몬스터 체력과 스폰 간격을 조정합니다
- 웨이브 종료 → 브레이크 타임 → 레벨업 → 다음 웨이브 구조를 담당하는 **게임 사이클 관리의 핵심 모듈**입니다

### PoolingSystem / ObjectPool<T> (성능 최적화)
- 몬스터, 투사체, 타일 등의 반복 생성 오브젝트를 풀링하여 재사용합니다
- `Instantiate` / `Destroy` 호출을 최소화하여 GC 및 프레임 드랍을 방지합니다
- 제네릭 기반 `ObjectPool<T>`로 구현해 새로운 타입 추가 시에도 동일한 패턴으로 관리할 수 있도록 설계했습니다

### UI 모듈
- `TileUI` : 2048 타일 숫자, 색상, 애니메이션  
- `HpUI` : 기지 체력 표시 및 피격 연출  
- `UpgradeUI` : 강화 선택 UI  
- `PlayerStatsUI` : 현재 전투 스탯 표시  
- `MonsterSystemUI` : 웨이브/브레이크 타임 카운트다운  
- `GameOverUI` : 게임 오버 시 재시작/로비 이동 처리

## ▶ 모바일 대응
- 모바일 해상도 대응을 위해 Canvas Scaler 조정 및 Safe Area를 사용해 UI를 구성
- 몬스터 스폰 위치 및 몬스터 감지 범위를 해상도 비율 기반으로 계산하도록 구현했습니다
